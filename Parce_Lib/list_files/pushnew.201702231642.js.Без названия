
function getpushcookie(name)
{var re=new RegExp(name+"=([^;]+)");var value=re.exec(document.cookie);return(value!=null)?unescape(value[1]):null;}
var pushset=getpushcookie('pushsetnew');if(pushset==null)
{if('serviceWorker'in navigator)
{navigator.serviceWorker.register('/swnew.js').then(ll_initworker);}
function ll_initworker()
{if(!('showNotification'in ServiceWorkerRegistration.prototype)||Notification.permission==='denied'||!('PushManager'in window))return;var now=new Date();var time=now.getTime();time+=600*1000;now.setTime(time);document.cookie='pushsetnew=1; expires='+now.toUTCString();navigator.serviceWorker.ready.then(function(serviceWorkerRegistration)
{serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true}).then(function(subscription)
{fetch('/service/savepushnew?url='+encodeURIComponent(subscription.endpoint));},function(error)
{fetch('/service/savepushnew?result=no');});});}}